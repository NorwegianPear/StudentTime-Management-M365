<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700" font-family="Segoe UI, Arial, sans-serif">
  <defs>
    <!-- Gradients -->
    <linearGradient id="azureGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0078D4"/>
      <stop offset="100%" style="stop-color:#005A9E"/>
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#107C10"/>
      <stop offset="100%" style="stop-color:#0B5C0B"/>
    </linearGradient>
    <linearGradient id="redGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#D13438"/>
      <stop offset="100%" style="stop-color:#A4262C"/>
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8764B8"/>
      <stop offset="100%" style="stop-color:#5C2D91"/>
    </linearGradient>
    <linearGradient id="cyanGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#00BCF2"/>
      <stop offset="100%" style="stop-color:#0078D4"/>
    </linearGradient>
    <!-- Shadow filter -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="700" fill="#fafafa"/>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-size="22" font-weight="bold" fill="#323130">Student Time Management - Solution Architecture</text>
  <text x="450" y="58" text-anchor="middle" font-size="13" fill="#605E5C">Automated M365 Account Enable/Disable via Azure Automation</text>

  <!-- SCHEDULES ROW -->
  <!-- Morning Schedule Box -->
  <g filter="url(#shadow)">
    <rect x="120" y="85" width="280" height="95" rx="8" fill="white" stroke="#107C10" stroke-width="2"/>
    <rect x="120" y="85" width="280" height="32" rx="8" fill="url(#greenGrad)"/>
    <rect x="120" y="109" width="280" height="8" fill="url(#greenGrad)"/>
  </g>
  <text x="260" y="107" text-anchor="middle" font-size="14" font-weight="bold" fill="white">â° Morning Schedule</text>
  <text x="260" y="145" text-anchor="middle" font-size="28" font-weight="bold" fill="#107C10">07:55 AM</text>
  <text x="260" y="168" text-anchor="middle" font-size="12" fill="#605E5C">Monday - Friday â†’ Enable Students</text>

  <!-- Afternoon Schedule Box -->
  <g filter="url(#shadow)">
    <rect x="500" y="85" width="280" height="95" rx="8" fill="white" stroke="#D13438" stroke-width="2"/>
    <rect x="500" y="85" width="280" height="32" rx="8" fill="url(#redGrad)"/>
    <rect x="500" y="109" width="280" height="8" fill="url(#redGrad)"/>
  </g>
  <text x="640" y="107" text-anchor="middle" font-size="14" font-weight="bold" fill="white">â° Afternoon Schedule</text>
  <text x="640" y="145" text-anchor="middle" font-size="28" font-weight="bold" fill="#D13438">04:05 PM</text>
  <text x="640" y="168" text-anchor="middle" font-size="12" fill="#605E5C">Monday - Friday â†’ Disable Students</text>

  <!-- Arrow from schedules to automation -->
  <path d="M260 180 L260 210 L450 210 L450 230" stroke="#0078D4" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M640 180 L640 210 L450 210" stroke="#0078D4" stroke-width="2" fill="none"/>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0078D4"/>
    </marker>
  </defs>

  <!-- AZURE AUTOMATION BOX -->
  <g filter="url(#shadow)">
    <rect x="100" y="235" width="700" height="165" rx="10" fill="white" stroke="#0078D4" stroke-width="2"/>
    <rect x="100" y="235" width="700" height="38" rx="10" fill="url(#azureGrad)"/>
    <rect x="100" y="265" width="700" height="8" fill="url(#azureGrad)"/>
  </g>
  <text x="450" y="261" text-anchor="middle" font-size="16" font-weight="bold" fill="white">â˜ï¸ Azure Automation Account</text>

  <!-- Runbook boxes inside -->
  <rect x="130" y="290" width="300" height="60" rx="6" fill="#E8F5E9" stroke="#107C10" stroke-width="1"/>
  <text x="280" y="315" text-anchor="middle" font-size="13" font-weight="bold" fill="#107C10">ğŸŸ¢ Enable-StudentAccess.ps1</text>
  <text x="280" y="338" text-anchor="middle" font-size="11" fill="#1B5E20" font-family="Consolas, monospace">accountEnabled = true</text>

  <rect x="470" y="290" width="300" height="60" rx="6" fill="#FFEBEE" stroke="#D13438" stroke-width="1"/>
  <text x="620" y="315" text-anchor="middle" font-size="13" font-weight="bold" fill="#D13438">ğŸ”´ Disable-StudentAccess.ps1</text>
  <text x="620" y="338" text-anchor="middle" font-size="11" fill="#A4262C" font-family="Consolas, monospace">accountEnabled = false</text>

  <!-- Encrypted Variables -->
  <rect x="180" y="360" width="540" height="30" rx="4" fill="#FFF8E1" stroke="#FFB900" stroke-width="1"/>
  <text x="450" y="380" text-anchor="middle" font-size="11" fill="#605E5C">
    <tspan font-weight="bold" fill="#FF8C00">ğŸ” Encrypted Variables:</tspan>
    <tspan font-family="Consolas, monospace"> TenantId | ClientId | ClientSecret | StudentGroupId</tspan>
  </text>

  <!-- Arrow to Graph API -->
  <path d="M450 400 L450 425" stroke="#5C2D91" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>
  <defs>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#5C2D91"/>
    </marker>
  </defs>

  <!-- GRAPH API BOX -->
  <g filter="url(#shadow)">
    <rect x="200" y="430" width="500" height="90" rx="8" fill="white" stroke="#5C2D91" stroke-width="2"/>
    <rect x="200" y="430" width="500" height="32" rx="8" fill="url(#purpleGrad)"/>
    <rect x="200" y="454" width="500" height="8" fill="url(#purpleGrad)"/>
  </g>
  <text x="450" y="452" text-anchor="middle" font-size="14" font-weight="bold" fill="white">ğŸ”— Microsoft Graph API (Free)</text>
  <text x="450" y="485" text-anchor="middle" font-size="12" fill="#5C2D91" font-family="Consolas, monospace">GET /groups/{id}/members</text>
  <text x="450" y="502" text-anchor="middle" font-size="12" fill="#107C10" font-family="Consolas, monospace">PATCH /users/{id} â†’ accountEnabled = true/false</text>

  <!-- Arrow to Entra ID -->
  <path d="M450 520 L450 545" stroke="#00BCF2" stroke-width="2" fill="none" marker-end="url(#arrowCyan)"/>
  <defs>
    <marker id="arrowCyan" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00BCF2"/>
    </marker>
  </defs>

  <!-- ENTRA ID BOX -->
  <g filter="url(#shadow)">
    <rect x="100" y="550" width="700" height="130" rx="10" fill="white" stroke="#00BCF2" stroke-width="2"/>
    <rect x="100" y="550" width="700" height="35" rx="10" fill="url(#cyanGrad)"/>
    <rect x="100" y="577" width="700" height="8" fill="url(#cyanGrad)"/>
  </g>
  <text x="450" y="573" text-anchor="middle" font-size="15" font-weight="bold" fill="white">ğŸ” Microsoft Entra ID</text>

  <!-- App Registration info -->
  <rect x="250" y="595" width="400" height="25" rx="4" fill="#E6F7FF" stroke="#00BCF2" stroke-width="1"/>
  <text x="450" y="612" text-anchor="middle" font-size="11" fill="#0078D4">
    <tspan font-weight="bold">App Registration:</tspan> User.ReadWrite.All, Group.Read.All âœ“
  </text>

  <!-- Students box -->
  <rect x="150" y="630" width="230" height="40" rx="6" fill="#FFEBEE" stroke="#D13438" stroke-width="2"/>
  <text x="265" y="648" text-anchor="middle" font-size="13" font-weight="bold" fill="#D13438">ğŸ‘¨â€ğŸ“ Students</text>
  <text x="265" y="663" text-anchor="middle" font-size="10" fill="#D13438">âš¡ AFFECTED by schedule</text>

  <!-- Teachers box -->
  <rect x="520" y="630" width="230" height="40" rx="6" fill="#E8F5E9" stroke="#107C10" stroke-width="2"/>
  <text x="635" y="648" text-anchor="middle" font-size="13" font-weight="bold" fill="#107C10">ğŸ‘©â€ğŸ« Teachers/Staff</text>
  <text x="635" y="663" text-anchor="middle" font-size="10" fill="#107C10">âœ“ NOT affected</text>

</svg>
